<!DOCTYPE html>
<html lang="de" xml:lang="de">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Teil 5 Geodaten beschaffen | Spatial Analysis mit R (I)</title>
  <meta name="description" content="Workshop" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Teil 5 Geodaten beschaffen | Spatial Analysis mit R (I)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Workshop" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Teil 5 Geodaten beschaffen | Spatial Analysis mit R (I)" />
  
  <meta name="twitter:description" content="Workshop" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="karten-erstellen-hos.html"/>
<link rel="next" href="geodaten-verschneiden.html"/>
<script src="assets/header-attrs-2.8/header-attrs.js"></script>
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="assets/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.0.1/anchor-sections.js"></script>
<link rel="icon" href="https://www.uni-frankfurt.de/favicon.ico" type="image/x-icon">
<script src="solutions.js"></script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Zeitplan</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#formales"><i class="fa fa-check"></i><b>1.1</b> Formales</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="getting-started.html"><a href="getting-started.html#keine-reguläre-anrechnung-des-workshops"><i class="fa fa-check"></i><b>1.1.1</b> Keine reguläre Anrechnung des Workshops</a></li>
<li class="chapter" data-level="1.1.2" data-path="getting-started.html"><a href="getting-started.html#methodenzertifikat"><i class="fa fa-check"></i><b>1.1.2</b> Methodenzertifikat</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#inhaltliches"><i class="fa fa-check"></i><b>1.2</b> Inhaltliches</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="getting-started.html"><a href="getting-started.html#lernziele-der-veranstaltung"><i class="fa fa-check"></i><b>1.2.1</b> Lernziele der Veranstaltung</a></li>
<li class="chapter" data-level="1.2.2" data-path="getting-started.html"><a href="getting-started.html#seminarkonzept"><i class="fa fa-check"></i><b>1.2.2</b> Seminarkonzept</a></li>
<li class="chapter" data-level="1.2.3" data-path="getting-started.html"><a href="getting-started.html#opinionated"><i class="fa fa-check"></i><b>1.2.3</b> <q>Opinionated…</q></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#didaktisches"><i class="fa fa-check"></i><b>1.3</b> Didaktisches</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="getting-started.html"><a href="getting-started.html#herausforderungen-in-der-it-didaktik"><i class="fa fa-check"></i><b>1.3.1</b> Herausforderungen in der IT-Didaktik</a></li>
<li class="chapter" data-level="1.3.2" data-path="getting-started.html"><a href="getting-started.html#everyone-fails"><i class="fa fa-check"></i><b>1.3.2</b> Everyone fails</a></li>
<li class="chapter" data-level="1.3.3" data-path="getting-started.html"><a href="getting-started.html#mein-ansatz-in-der-lehre"><i class="fa fa-check"></i><b>1.3.3</b> Mein Ansatz in der Lehre</a></li>
<li class="chapter" data-level="1.3.4" data-path="getting-started.html"><a href="getting-started.html#schattenkompetenzen"><i class="fa fa-check"></i><b>1.3.4</b> <q>Schattenkompetenzen</q></a></li>
<li class="chapter" data-level="1.3.5" data-path="getting-started.html"><a href="getting-started.html#dieser-workshop-findet-in-verschiedenen-modi-statt"><i class="fa fa-check"></i><b>1.3.5</b> Dieser Workshop findet in verschiedenen Modi statt:</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#technisches"><i class="fa fa-check"></i><b>1.4</b> Technisches</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#arbeitsplatz"><i class="fa fa-check"></i><b>1.4.1</b> Arbeitsplatz</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#workshopunterlagen"><i class="fa fa-check"></i><b>1.4.2</b> Workshopunterlagen</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.4.3</b> RStudio Cloud</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html"><i class="fa fa-check"></i><b>2</b> Daten visualisieren</a>
<ul>
<li class="chapter" data-level="2.1" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#lernziele-dieser-sitzung"><i class="fa fa-check"></i><b>2.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="2.2" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#voraussetzungen"><i class="fa fa-check"></i><b>2.2</b> Voraussetzungen</a></li>
<li class="chapter" data-level="2.3" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#überblick"><i class="fa fa-check"></i><b>2.3</b> Überblick</a></li>
<li class="chapter" data-level="2.4" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#visualisierung-mit-dem-standardpaket"><i class="fa fa-check"></i><b>2.4</b> Visualisierung mit dem Standardpaket</a></li>
<li class="chapter" data-level="2.5" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#visualisierung-mit-ggplot"><i class="fa fa-check"></i><b>2.5</b> Visualisierung mit <code>ggplot()</code></a></li>
<li class="chapter" data-level="2.6" data-path="daten-visualisieren.html"><a href="daten-visualisieren.html#aufgaben"><i class="fa fa-check"></i><b>2.6</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html"><i class="fa fa-check"></i><b>3</b> Karten erstellen (FTR)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#lernziele-dieser-sitzung-1"><i class="fa fa-check"></i><b>3.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="3.2" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#voraussetzungen-1"><i class="fa fa-check"></i><b>3.2</b> Voraussetzungen</a></li>
<li class="chapter" data-level="3.3" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#exkurs-pipes"><i class="fa fa-check"></i><b>3.3</b> Exkurs: Pipes</a></li>
<li class="chapter" data-level="3.4" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#daten-importieren"><i class="fa fa-check"></i><b>3.4</b> Daten importieren</a></li>
<li class="chapter" data-level="3.5" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#überblick-verschaffen"><i class="fa fa-check"></i><b>3.5</b> Überblick verschaffen</a></li>
<li class="chapter" data-level="3.6" data-path="karten-erstellen-ftr.html"><a href="karten-erstellen-ftr.html#visualisieren"><i class="fa fa-check"></i><b>3.6</b> Visualisieren</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="karten-erstellen-hos.html"><a href="karten-erstellen-hos.html"><i class="fa fa-check"></i><b>4</b> Karten erstellen (HOS)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="karten-erstellen-hos.html"><a href="karten-erstellen-hos.html#aufgaben-1"><i class="fa fa-check"></i><b>4.1</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html"><i class="fa fa-check"></i><b>5</b> Geodaten beschaffen</a>
<ul>
<li class="chapter" data-level="5.1" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#lernziele-dieser-sitzung-2"><i class="fa fa-check"></i><b>5.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="5.2" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#vorbereitung"><i class="fa fa-check"></i><b>5.2</b> Vorbereitung</a></li>
<li class="chapter" data-level="5.3" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#datenbeschaffung"><i class="fa fa-check"></i><b>5.3</b> Datenbeschaffung</a></li>
<li class="chapter" data-level="5.4" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#datenformatierung"><i class="fa fa-check"></i><b>5.4</b> Datenformatierung</a></li>
<li class="chapter" data-level="5.5" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#datenaufbereitung"><i class="fa fa-check"></i><b>5.5</b> Datenaufbereitung</a></li>
<li class="chapter" data-level="5.6" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#datenvisualisierung"><i class="fa fa-check"></i><b>5.6</b> Datenvisualisierung</a></li>
<li class="chapter" data-level="5.7" data-path="geodaten-beschaffen.html"><a href="geodaten-beschaffen.html#aufgaben-2"><i class="fa fa-check"></i><b>5.7</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html"><i class="fa fa-check"></i><b>6</b> Geodaten verschneiden</a>
<ul>
<li class="chapter" data-level="6.1" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#lernziele"><i class="fa fa-check"></i><b>6.1</b> Lernziele</a></li>
<li class="chapter" data-level="6.2" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#vorbereitung-1"><i class="fa fa-check"></i><b>6.2</b> Vorbereitung</a></li>
<li class="chapter" data-level="6.3" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#ziel"><i class="fa fa-check"></i><b>6.3</b> Ziel</a></li>
<li class="chapter" data-level="6.4" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#grundkarte"><i class="fa fa-check"></i><b>6.4</b> Grundkarte</a></li>
<li class="chapter" data-level="6.5" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#osm-daten"><i class="fa fa-check"></i><b>6.5</b> OSM-Daten</a></li>
<li class="chapter" data-level="6.6" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#koordinatenreferenzsysteme"><i class="fa fa-check"></i><b>6.6</b> Koordinatenreferenzsysteme</a></li>
<li class="chapter" data-level="6.7" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#verschneiden"><i class="fa fa-check"></i><b>6.7</b> Verschneiden</a></li>
<li class="chapter" data-level="6.8" data-path="geodaten-verschneiden.html"><a href="geodaten-verschneiden.html#aufgaben-3"><i class="fa fa-check"></i><b>6.8</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="weitere-methoden.html"><a href="weitere-methoden.html"><i class="fa fa-check"></i><b>7</b> Weitere Methoden</a>
<ul>
<li class="chapter" data-level="7.1" data-path="weitere-methoden.html"><a href="weitere-methoden.html#vorbereitung-2"><i class="fa fa-check"></i><b>7.1</b> Vorbereitung</a></li>
<li class="chapter" data-level="7.2" data-path="weitere-methoden.html"><a href="weitere-methoden.html#aufgabe"><i class="fa fa-check"></i><b>7.2</b> Aufgabe</a></li>
<li class="chapter" data-level="7.3" data-path="weitere-methoden.html"><a href="weitere-methoden.html#daten-einlesen"><i class="fa fa-check"></i><b>7.3</b> Daten einlesen</a></li>
<li class="chapter" data-level="7.4" data-path="weitere-methoden.html"><a href="weitere-methoden.html#überblick-verschaffen-1"><i class="fa fa-check"></i><b>7.4</b> Überblick verschaffen</a></li>
<li class="chapter" data-level="7.5" data-path="weitere-methoden.html"><a href="weitere-methoden.html#zusammenfassen"><i class="fa fa-check"></i><b>7.5</b> Zusammenfassen</a></li>
<li class="chapter" data-level="7.6" data-path="weitere-methoden.html"><a href="weitere-methoden.html#verschneiden-1"><i class="fa fa-check"></i><b>7.6</b> Verschneiden</a></li>
<li class="chapter" data-level="7.7" data-path="weitere-methoden.html"><a href="weitere-methoden.html#kartieren"><i class="fa fa-check"></i><b>7.7</b> Kartieren</a></li>
<li class="chapter" data-level="7.8" data-path="weitere-methoden.html"><a href="weitere-methoden.html#choroplethen"><i class="fa fa-check"></i><b>7.8</b> Choroplethen</a></li>
<li class="chapter" data-level="7.9" data-path="weitere-methoden.html"><a href="weitere-methoden.html#räumliches-verschneiden"><i class="fa fa-check"></i><b>7.9</b> Räumliches Verschneiden</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html"><i class="fa fa-check"></i><b>8</b> Publizieren und nach Hilfe fragen</a>
<ul>
<li class="chapter" data-level="8.1" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#publizieren-mit-rmarkdown"><i class="fa fa-check"></i><b>8.1</b> Publizieren mit Rmarkdown</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#text-formatieren"><i class="fa fa-check"></i><b>8.1.1</b> Text formatieren</a></li>
<li class="chapter" data-level="8.1.2" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#der-knit-button"><i class="fa fa-check"></i><b>8.1.2</b> Der Knit-Button</a></li>
<li class="chapter" data-level="8.1.3" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#kable"><i class="fa fa-check"></i><b>8.1.3</b> Kable</a></li>
<li class="chapter" data-level="8.1.4" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#chunk-options"><i class="fa fa-check"></i><b>8.1.4</b> Chunk Options</a></li>
<li class="chapter" data-level="8.1.5" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#reproducible-research"><i class="fa fa-check"></i><b>8.1.5</b> Reproducible research</a></li>
<li class="chapter" data-level="8.1.6" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#wissenschaftliches-zitieren"><i class="fa fa-check"></i><b>8.1.6</b> Wissenschaftliches Zitieren</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="publizieren-und-nach-hilfe-fragen.html"><a href="publizieren-und-nach-hilfe-fragen.html#nach-hilfe-fragen"><i class="fa fa-check"></i><b>8.2</b> Nach Hilfe fragen</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial Analysis mit R (I)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geodaten-beschaffen" class="section level1" number="5">
<h1><span class="header-section-number">Teil 5</span> Geodaten beschaffen</h1>
<div id="lernziele-dieser-sitzung-2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Lernziele dieser Sitzung</h2>
<p>Sie können…</p>
<ul>
<li>sich den Quellcode einer Webseite anzeigen lassen und interpretieren.</li>
<li>HTML-Tabellen als Datensatz einlesen.</li>
<li>Fortgeschrittene Methoden der Datenbereinigung nachvollziehen.</li>
</ul>
</div>
<div id="vorbereitung" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Vorbereitung</h2>
<p>Am Beispiel der Küstenlängen verschiedener Länder besprechen wir Techniken der Datenerhebung/-erfassung und -visualisierung. Unser Ziel ist es, die Daten zu den Küstenlängen in einer Grafik darzustellen.</p>
<p>Für die folgenden Aufgaben benötigen wir die Pakete <code>rvest</code> und <code>tidyverse</code>. Zunächst müssen diese installiert und in unsere Umgebung geladen werden.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="geodaten-beschaffen.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb46-2"><a href="geodaten-beschaffen.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
</div>
<div id="datenbeschaffung" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Datenbeschaffung</h2>
<p>Auf dem Internetauftritt der CIA gab es es eine Tabelle, welche die Küstenlänge (inklusive der Inseln) der einzelnen Länder enthält.</p>
<p>Über die Archivierungsplattform WayBackMachine ist die Seite immer noch abrufbar: <a href="https://web.archive.org/web/20190802010710/https://www.cia.gov/library/publications/the-world-factbook/fields/282.html" class="uri">https://web.archive.org/web/20190802010710/https://www.cia.gov/library/publications/the-world-factbook/fields/282.html</a></p>
<p>In einem ersten Schritt wird die URL der Tabelle der Variable <code>url</code> zugewiesen, sodass der Quellcode mit dem Befehl <code>read_html()</code> eingelesen werden kann.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="geodaten-beschaffen.html#cb47-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://web.archive.org/web/20190802010710/https://www.cia.gov/library/publications/the-world-factbook/fields/282.html&quot;</span></span>
<span id="cb47-2"><a href="geodaten-beschaffen.html#cb47-2" aria-hidden="true" tabindex="-1"></a>reply <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span></code></pre></div>
<p>Der Befehl <code>html_table()</code> ermöglicht das Auslesen <em>aller</em> Tabellen auf der Seite. Mithilfe des Befehls <code>str()</code> sehen wir, dass die Seite genau eine Tabelle enthält, welche die Informationen zu den Küstenlängen enthält.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="geodaten-beschaffen.html#cb48-1" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">html_table</span>(reply, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-2"><a href="geodaten-beschaffen.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tables)</span>
<span id="cb48-3"><a href="geodaten-beschaffen.html#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="do">## List of 1</span></span>
<span id="cb48-4"><a href="geodaten-beschaffen.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ : tibble [266 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb48-5"><a href="geodaten-beschaffen.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Country  : chr [1:266] &quot;Afghanistan&quot; &quot;Akrotiri&quot; &quot;Albania&quot; &quot;Algeria&quot; ...</span></span>
<span id="cb48-6"><a href="geodaten-beschaffen.html#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Coastline: chr [1:266] &quot;0 km\n          (landlocked)&quot; &quot;56.3 km&quot; &quot;362 km&quot; &quot;998 km&quot; ...</span></span></code></pre></div>
<p>Durch die Umformung zu einem tibble erhalten wir eine Tabelle mit den gewünschten Informationen:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="geodaten-beschaffen.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(tables[[<span class="dv">1</span>]])</span>
<span id="cb49-2"><a href="geodaten-beschaffen.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 266 x 2</span></span>
<span id="cb49-3"><a href="geodaten-beschaffen.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Country             Coastline                     </span></span>
<span id="cb49-4"><a href="geodaten-beschaffen.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;               &lt;chr&gt;                         </span></span>
<span id="cb49-5"><a href="geodaten-beschaffen.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Afghanistan         &quot;0 km\n          (landlocked)&quot;</span></span>
<span id="cb49-6"><a href="geodaten-beschaffen.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Akrotiri            &quot;56.3 km&quot;                     </span></span>
<span id="cb49-7"><a href="geodaten-beschaffen.html#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Albania             &quot;362 km&quot;                      </span></span>
<span id="cb49-8"><a href="geodaten-beschaffen.html#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Algeria             &quot;998 km&quot;                      </span></span>
<span id="cb49-9"><a href="geodaten-beschaffen.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 American Samoa      &quot;116 km&quot;                      </span></span>
<span id="cb49-10"><a href="geodaten-beschaffen.html#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Andorra             &quot;0 km\n          (landlocked)&quot;</span></span>
<span id="cb49-11"><a href="geodaten-beschaffen.html#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Angola              &quot;1,600 km&quot;                    </span></span>
<span id="cb49-12"><a href="geodaten-beschaffen.html#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Anguilla            &quot;61 km&quot;                       </span></span>
<span id="cb49-13"><a href="geodaten-beschaffen.html#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Antarctica          &quot;17,968 km&quot;                   </span></span>
<span id="cb49-14"><a href="geodaten-beschaffen.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Antigua and Barbuda &quot;153 km&quot;                      </span></span>
<span id="cb49-15"><a href="geodaten-beschaffen.html#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 256 more rows</span></span></code></pre></div>
<p>Mit pipes können wir die obigen Befehle zusammenfassen und somit das Ganze auf einmal ausführen.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="geodaten-beschaffen.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://web.archive.org/web/20190802010710/https://www.cia.gov/library/publications/the-world-factbook/fields/282.html&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="geodaten-beschaffen.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="geodaten-beschaffen.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="geodaten-beschaffen.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="geodaten-beschaffen.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="ot">-&gt;</span> coast</span></code></pre></div>
</div>
<div id="datenformatierung" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Datenformatierung</h2>
<p>Zur Datenformatierung nutzen wir Funktionen aus dem Paket <code>stringr</code>. Die Spalte mit der Küstenlänge soll keinen Text, keine Einheit direkt hinter den Zahlenwerten und keine Kommata zur Trennung der Zahlenwerte enthalten.</p>
<p>Der Befehl <q>str_extract()</q> sucht nach vorgegebenen Mustern (engl. <em>patterns</em>) und wählt diese aus. Diese patterns werden auch reguläre Ausdrücke (<em>regular expressions / regex</em>) genannt und sind eigentlich <a href="https://danielfett.de/en/tutorials/tutorial-regulare-ausdrucke/">ein Thema für sich</a>. Das Pattern <code>[0-9,.]+ km</code> extrahiert die Kilometerangaben.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="geodaten-beschaffen.html#cb51-1" aria-hidden="true" tabindex="-1"></a>km <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(coast<span class="sc">$</span>Coastline, <span class="st">&quot;[0-9,.]+ km&quot;</span>)</span></code></pre></div>
<p>Die ausgewählten Muster (in unserem Fall Kommata und Text) können durch den Befehl <code>str_replace_all()</code> gelöscht oder ersetzt werden. Wir ersetzen alle Zeichen <em>außer</em> Zahlen und Dezimalpunkt mit einem leeren String, so dass sie verschwinden.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="geodaten-beschaffen.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(km, <span class="st">&quot;[^0-9.]&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb52-2"><a href="geodaten-beschaffen.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   [1] &quot;0&quot;       &quot;56.3&quot;    &quot;362&quot;     &quot;998&quot;     &quot;116&quot;     &quot;0&quot;       &quot;1600&quot;   </span></span>
<span id="cb52-3"><a href="geodaten-beschaffen.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   [8] &quot;61&quot;      &quot;17968&quot;   &quot;153&quot;     &quot;45389&quot;   &quot;4989&quot;    &quot;0&quot;       &quot;68.5&quot;   </span></span>
<span id="cb52-4"><a href="geodaten-beschaffen.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [15] &quot;74.1&quot;    &quot;111866&quot;  &quot;25760&quot;   &quot;0&quot;       &quot;0&quot;       &quot;3542&quot;    &quot;161&quot;    </span></span>
<span id="cb52-5"><a href="geodaten-beschaffen.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [22] &quot;580&quot;     &quot;97&quot;      &quot;0&quot;       &quot;66.5&quot;    &quot;386&quot;     &quot;121&quot;     &quot;103&quot;    </span></span>
<span id="cb52-6"><a href="geodaten-beschaffen.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [29] &quot;0&quot;       &quot;0&quot;       &quot;20&quot;      &quot;0&quot;       &quot;29.6&quot;    &quot;7491&quot;    &quot;698&quot;    </span></span>
<span id="cb52-7"><a href="geodaten-beschaffen.html#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [36] &quot;80&quot;      &quot;161&quot;     &quot;354&quot;     &quot;0&quot;       &quot;1930&quot;    &quot;0&quot;       &quot;965&quot;    </span></span>
<span id="cb52-8"><a href="geodaten-beschaffen.html#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [43] &quot;443&quot;     &quot;402&quot;     &quot;202080&quot;  &quot;160&quot;     &quot;0&quot;       &quot;0&quot;       &quot;6435&quot;   </span></span>
<span id="cb52-9"><a href="geodaten-beschaffen.html#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [50] &quot;14500&quot;   &quot;138.9&quot;   &quot;11.1&quot;    &quot;26&quot;      &quot;3208&quot;    &quot;340&quot;     &quot;37&quot;     </span></span>
<span id="cb52-10"><a href="geodaten-beschaffen.html#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  [57] &quot;169&quot;     &quot;120&quot;     &quot;3095&quot;    &quot;1290&quot;    &quot;515&quot;     &quot;5835&quot;    &quot;3735&quot;   </span></span>
<span id="cb52-11"><a href="geodaten-beschaffen.html#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [64] &quot;364&quot;     &quot;648&quot;     &quot;0&quot;       &quot;7314&quot;    &quot;27.5&quot;    &quot;314&quot;     &quot;148&quot;    </span></span>
<span id="cb52-12"><a href="geodaten-beschaffen.html#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  [71] &quot;1288&quot;    &quot;2237&quot;    &quot;2450&quot;    &quot;307&quot;     &quot;296&quot;     &quot;2234&quot;    &quot;3794&quot;   </span></span>
<span id="cb52-13"><a href="geodaten-beschaffen.html#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  [78] &quot;0&quot;       &quot;0&quot;       &quot;65992.9&quot; &quot;1288&quot;    &quot;1117&quot;    &quot;1129&quot;    &quot;1250&quot;   </span></span>
<span id="cb52-14"><a href="geodaten-beschaffen.html#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  [85] &quot;4853&quot;    &quot;2525&quot;    &quot;28&quot;      &quot;885&quot;     &quot;80&quot;      &quot;40&quot;      &quot;310&quot;    </span></span>
<span id="cb52-15"><a href="geodaten-beschaffen.html#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  [92] &quot;2389&quot;    &quot;539&quot;     &quot;12&quot;      &quot;13676&quot;   &quot;44087&quot;   &quot;121&quot;     &quot;125.5&quot;  </span></span>
<span id="cb52-16"><a href="geodaten-beschaffen.html#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  [99] &quot;400&quot;     &quot;50&quot;      &quot;320&quot;     &quot;350&quot;     &quot;459&quot;     &quot;1771&quot;    &quot;101.9&quot;  </span></span>
<span id="cb52-17"><a href="geodaten-beschaffen.html#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [106] &quot;0&quot;       &quot;823&quot;     &quot;733&quot;     &quot;6.4&quot;     &quot;0&quot;       &quot;4970&quot;    &quot;7000&quot;   </span></span>
<span id="cb52-18"><a href="geodaten-beschaffen.html#cb52-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [113] &quot;66526&quot;   &quot;54716&quot;   &quot;2440&quot;    &quot;58&quot;      &quot;1448&quot;    &quot;160&quot;     &quot;273&quot;    </span></span>
<span id="cb52-19"><a href="geodaten-beschaffen.html#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [120] &quot;7600&quot;    &quot;1022&quot;    &quot;124.1&quot;   &quot;29751&quot;   &quot;8&quot;       &quot;70&quot;      &quot;34&quot;     </span></span>
<span id="cb52-20"><a href="geodaten-beschaffen.html#cb52-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [127] &quot;26&quot;      &quot;0&quot;       &quot;536&quot;     &quot;3&quot;       &quot;1143&quot;    &quot;2495&quot;    &quot;2413&quot;   </span></span>
<span id="cb52-21"><a href="geodaten-beschaffen.html#cb52-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [134] &quot;0&quot;       &quot;499&quot;     &quot;0&quot;       &quot;0&quot;       &quot;498&quot;     &quot;225&quot;     &quot;0&quot;      </span></span>
<span id="cb52-22"><a href="geodaten-beschaffen.html#cb52-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [141] &quot;579&quot;     &quot;1770&quot;    &quot;0&quot;       &quot;90&quot;      &quot;0&quot;       &quot;41&quot;      &quot;4828&quot;   </span></span>
<span id="cb52-23"><a href="geodaten-beschaffen.html#cb52-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [148] &quot;0&quot;       &quot;4675&quot;    &quot;644&quot;     &quot;0&quot;       &quot;196.8&quot;   &quot;370.4&quot;   &quot;754&quot;    </span></span>
<span id="cb52-24"><a href="geodaten-beschaffen.html#cb52-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [155] &quot;177&quot;     &quot;9330&quot;    &quot;6112&quot;    &quot;15&quot;      &quot;0&quot;       &quot;4.1&quot;     &quot;0&quot;      </span></span>
<span id="cb52-25"><a href="geodaten-beschaffen.html#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [162] &quot;293.5&quot;   &quot;40&quot;      &quot;1835&quot;    &quot;2470&quot;    &quot;1572&quot;    &quot;30&quot;      &quot;8&quot;      </span></span>
<span id="cb52-26"><a href="geodaten-beschaffen.html#cb52-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [169] &quot;0&quot;       &quot;451&quot;     &quot;2254&quot;    &quot;15134&quot;   &quot;910&quot;     &quot;0&quot;       &quot;853&quot;    </span></span>
<span id="cb52-27"><a href="geodaten-beschaffen.html#cb52-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [176] &quot;64&quot;      &quot;32&quot;      &quot;0&quot;       &quot;1482&quot;    &quot;25148&quot;   &quot;2092&quot;    &quot;135663&quot; </span></span>
<span id="cb52-28"><a href="geodaten-beschaffen.html#cb52-28" aria-hidden="true" tabindex="-1"></a><span class="do">## [183] &quot;1046&quot;    &quot;1519&quot;    &quot;14.5&quot;    &quot;2490&quot;    &quot;5152&quot;    &quot;518&quot;     &quot;0&quot;      </span></span>
<span id="cb52-29"><a href="geodaten-beschaffen.html#cb52-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [190] &quot;2414&quot;    &quot;36289&quot;   &quot;51&quot;      &quot;440&quot;     &quot;1793&quot;    &quot;501&quot;     &quot;563&quot;    </span></span>
<span id="cb52-30"><a href="geodaten-beschaffen.html#cb52-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [197] &quot;225&quot;     &quot;37653&quot;   &quot;0&quot;       &quot;60&quot;      &quot;135&quot;     &quot;158&quot;     &quot;58.9&quot;   </span></span>
<span id="cb52-31"><a href="geodaten-beschaffen.html#cb52-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [204] &quot;120&quot;     &quot;84&quot;      &quot;403&quot;     &quot;0&quot;       &quot;209&quot;     &quot;2640&quot;    &quot;531&quot;    </span></span>
<span id="cb52-32"><a href="geodaten-beschaffen.html#cb52-32" aria-hidden="true" tabindex="-1"></a><span class="do">## [211] &quot;0&quot;       &quot;491&quot;     &quot;402&quot;     &quot;193&quot;     &quot;58.9&quot;    &quot;0&quot;       &quot;46.6&quot;   </span></span>
<span id="cb52-33"><a href="geodaten-beschaffen.html#cb52-33" aria-hidden="true" tabindex="-1"></a><span class="do">## [218] &quot;5313&quot;    &quot;3025&quot;    &quot;2798&quot;    NA        &quot;0&quot;       &quot;17968&quot;   &quot;4964&quot;   </span></span>
<span id="cb52-34"><a href="geodaten-beschaffen.html#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="do">## [225] &quot;926&quot;     &quot;1340&quot;    &quot;853&quot;     &quot;386&quot;     &quot;3587&quot;    &quot;3218&quot;    &quot;0&quot;      </span></span>
<span id="cb52-35"><a href="geodaten-beschaffen.html#cb52-35" aria-hidden="true" tabindex="-1"></a><span class="do">## [232] &quot;193&quot;     &quot;1566.3&quot;  &quot;0&quot;       &quot;1424&quot;    &quot;3219&quot;    &quot;706&quot;     &quot;56&quot;     </span></span>
<span id="cb52-36"><a href="geodaten-beschaffen.html#cb52-36" aria-hidden="true" tabindex="-1"></a><span class="do">## [239] &quot;101&quot;     &quot;419&quot;     &quot;362&quot;     &quot;1148&quot;    &quot;7200&quot;    &quot;0&quot;       &quot;389&quot;    </span></span>
<span id="cb52-37"><a href="geodaten-beschaffen.html#cb52-37" aria-hidden="true" tabindex="-1"></a><span class="do">## [246] &quot;24&quot;      &quot;0&quot;       &quot;2782&quot;    &quot;1318&quot;    &quot;12429&quot;   &quot;19924&quot;   &quot;4.8&quot;    </span></span>
<span id="cb52-38"><a href="geodaten-beschaffen.html#cb52-38" aria-hidden="true" tabindex="-1"></a><span class="do">## [253] &quot;660&quot;     &quot;0&quot;       &quot;2528&quot;    &quot;2800&quot;    &quot;3444&quot;    &quot;188&quot;     &quot;19.3&quot;   </span></span>
<span id="cb52-39"><a href="geodaten-beschaffen.html#cb52-39" aria-hidden="true" tabindex="-1"></a><span class="do">## [260] &quot;129&quot;     &quot;0&quot;       &quot;1110&quot;    &quot;356000&quot;  &quot;1906&quot;    &quot;0&quot;       &quot;0&quot;</span></span></code></pre></div>
<p>Auch hier kann alles in einen Befehl gepackt werden:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="geodaten-beschaffen.html#cb53-1" aria-hidden="true" tabindex="-1"></a>coast<span class="sc">$</span>Coastline <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="geodaten-beschaffen.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9,.]+ km&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="geodaten-beschaffen.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;[^0-9.]&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="geodaten-beschaffen.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> coast<span class="sc">$</span>coast_num</span></code></pre></div>
</div>
<div id="datenaufbereitung" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Datenaufbereitung</h2>
<p>Mit dem Befehl <code>arrange()</code> kann die Tabelle sortiert werden. Zunächst auftseigend,</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="geodaten-beschaffen.html#cb54-1" aria-hidden="true" tabindex="-1"></a>coast <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="geodaten-beschaffen.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(coast_num)</span>
<span id="cb54-3"><a href="geodaten-beschaffen.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 266 x 3</span></span>
<span id="cb54-4"><a href="geodaten-beschaffen.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    Country     Coastline                                               coast_num</span></span>
<span id="cb54-5"><a href="geodaten-beschaffen.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;       &lt;chr&gt;                                                       &lt;dbl&gt;</span></span>
<span id="cb54-6"><a href="geodaten-beschaffen.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Afghanistan &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-7"><a href="geodaten-beschaffen.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Andorra     &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-8"><a href="geodaten-beschaffen.html#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Armenia     &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-9"><a href="geodaten-beschaffen.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Austria     &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-10"><a href="geodaten-beschaffen.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Azerbaijan  &quot;0 km\n          (landlocked); note - Azerbaijan borde…         0</span></span>
<span id="cb54-11"><a href="geodaten-beschaffen.html#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Belarus     &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-12"><a href="geodaten-beschaffen.html#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Bhutan      &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-13"><a href="geodaten-beschaffen.html#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Bolivia     &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-14"><a href="geodaten-beschaffen.html#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Botswana    &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-15"><a href="geodaten-beschaffen.html#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Burkina Fa… &quot;0 km\n          (landlocked)&quot;                                  0</span></span>
<span id="cb54-16"><a href="geodaten-beschaffen.html#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 256 more rows</span></span></code></pre></div>
<p>und schließlich absteigend, sodass die größten Werte an erster Stelle stehen.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="geodaten-beschaffen.html#cb55-1" aria-hidden="true" tabindex="-1"></a>coast <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="geodaten-beschaffen.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(coast_num))</span>
<span id="cb55-3"><a href="geodaten-beschaffen.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 266 x 3</span></span>
<span id="cb55-4"><a href="geodaten-beschaffen.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    Country      Coastline                                              coast_num</span></span>
<span id="cb55-5"><a href="geodaten-beschaffen.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;        &lt;chr&gt;                                                      &lt;dbl&gt;</span></span>
<span id="cb55-6"><a href="geodaten-beschaffen.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 World        &quot;356,000 km\n          \n          \n        \n\n  \n…   356000 </span></span>
<span id="cb55-7"><a href="geodaten-beschaffen.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Canada       &quot;202,080 km\n          \n          \n        \n\n  \n…   202080 </span></span>
<span id="cb55-8"><a href="geodaten-beschaffen.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Pacific Oce… &quot;135,663 km&quot;                                             135663 </span></span>
<span id="cb55-9"><a href="geodaten-beschaffen.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Atlantic Oc… &quot;111,866 km&quot;                                             111866 </span></span>
<span id="cb55-10"><a href="geodaten-beschaffen.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Indian Ocean &quot;66,526 km&quot;                                               66526 </span></span>
<span id="cb55-11"><a href="geodaten-beschaffen.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 European Un… &quot;65,992.9 km&quot;                                             65993.</span></span>
<span id="cb55-12"><a href="geodaten-beschaffen.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Indonesia    &quot;54,716 km&quot;                                               54716 </span></span>
<span id="cb55-13"><a href="geodaten-beschaffen.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Arctic Ocean &quot;45,389 km&quot;                                               45389 </span></span>
<span id="cb55-14"><a href="geodaten-beschaffen.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Greenland    &quot;44,087 km&quot;                                               44087 </span></span>
<span id="cb55-15"><a href="geodaten-beschaffen.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Russia       &quot;37,653 km&quot;                                               37653 </span></span>
<span id="cb55-16"><a href="geodaten-beschaffen.html#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 256 more rows</span></span></code></pre></div>
<p>Bevor wir jedoch eine vollständig sortierte Liste haben, muss der Datensatz noch von falschen Einträgen gesäubert werden. Dafür benutzen wir den Befehl <code>filter()</code>. Wir suchen wieder nach einem bestimmten Muster (hier zum Beispiel dem Wort <q>Ocean</q>) und filtern es aus dem Datensatz.</p>
<p>Die Grafik soll nur aus den ersten 30 Einträgen der Tabelle bestehen, welche uns der Befehl <code>head()</code> ausgibt.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="geodaten-beschaffen.html#cb56-1" aria-hidden="true" tabindex="-1"></a>coast <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="geodaten-beschaffen.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(coast_num)) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="geodaten-beschaffen.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(Country, <span class="st">&quot;Ocean&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="geodaten-beschaffen.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;World&quot;</span>, <span class="st">&quot;European Union&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb56-5"><a href="geodaten-beschaffen.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">30</span>) <span class="ot">-&gt;</span> top_30</span></code></pre></div>
</div>
<div id="datenvisualisierung" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Datenvisualisierung</h2>
<p>Das Balkendiagramm erhalten wir durch den <q>ggplot</q> Befehl. Hierbei gibt es verschiedenste Einstellmöglichkeiten. Wichitg sind vor allem die Angabe des verwendeten Datensatzes und die Art der Grafik (ob Kartendarstellung oder Balkendiagramm). Desweiteren kann man noch Farben der Eigenschaften, eine Achsenbeschriftung u. v. m. bestimmen.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="geodaten-beschaffen.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_30, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, coast_num), <span class="at">y=</span>coast_num)) <span class="sc">+</span></span>
<span id="cb57-2"><a href="geodaten-beschaffen.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>, <span class="at">fill=</span><span class="st">&quot;darkblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-3"><a href="geodaten-beschaffen.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb57-4"><a href="geodaten-beschaffen.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb57-5"><a href="geodaten-beschaffen.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Küstenlinie (km)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
</div>
<div id="aufgaben-2" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Aufgaben</h2>
<ol style="list-style-type: decimal">
<li><p>Importieren Sie die Daten zu den <a href="https://en.wikipedia.org/wiki/List_of_deadly_earthquakes_since_1900">tödlichen Erdbeben auf Wikipedia</a>
und formen sie diese zu einem tibble um.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb58-1"><a href="geodaten-beschaffen.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://en.wikipedia.org/wiki/List_of_deadly_earthquakes_since_1900&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="geodaten-beschaffen.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  read_html <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="geodaten-beschaffen.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="geodaten-beschaffen.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">5</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="geodaten-beschaffen.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.tibble</span>() <span class="ot">-&gt;</span> earthquakes_raw</span></code></pre></div></li>
<li><p>Erstellen Sie mit den erhaltenen Daten eine Karte, welche die Lage und die Stärke der Erdbeben angibt:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb59-1"><a href="geodaten-beschaffen.html#cb59-1" aria-hidden="true" tabindex="-1"></a>earthquakes_raw <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="geodaten-beschaffen.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lat =</span> <span class="fu">as.numeric</span>(Lat), <span class="at">Long =</span> <span class="fu">as.numeric</span>(Long)) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="geodaten-beschaffen.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">magnitude_num =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(Magnitude, <span class="st">&quot;[0-9.]+&quot;</span>))) <span class="ot">-&gt;</span> earthquakes</span>
<span id="cb59-4"><a href="geodaten-beschaffen.html#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="geodaten-beschaffen.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb59-6"><a href="geodaten-beschaffen.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> <span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>), <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb59-7"><a href="geodaten-beschaffen.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> earthquakes,</span>
<span id="cb59-8"><a href="geodaten-beschaffen.html#cb59-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> Long, <span class="at">y =</span> Lat, <span class="at">size =</span> magnitude_num),</span>
<span id="cb59-9"><a href="geodaten-beschaffen.html#cb59-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb59-10"><a href="geodaten-beschaffen.html#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_quickmap</span>() <span class="sc">+</span></span>
<span id="cb59-11"><a href="geodaten-beschaffen.html#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="st">&quot;Stärke&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p></li>
<li><p>Wandeln Sie den Erdbeben-Datensatz in das Simple Features Format um. Laden Sie zusätzlich eine Weltkarte mit dem Paket <code>rnaturalearth</code> und wandeln Sie auch diese in Simple Features um. Finden Sie außerdem einen Geodatensatz zu tektonischen Platten. Visualiseren Sie alles auf einer Welktarte (Projektion: Gall-Peters).</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb60-1"><a href="geodaten-beschaffen.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb60-2"><a href="geodaten-beschaffen.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="geodaten-beschaffen.html#cb60-3" aria-hidden="true" tabindex="-1"></a>earthquakes <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="geodaten-beschaffen.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span> <span class="fu">is.na</span>(Long)) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="geodaten-beschaffen.html#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;Long&quot;</span>, <span class="st">&quot;Lat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-6"><a href="geodaten-beschaffen.html#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4326</span>) <span class="ot">-&gt;</span> quakesf</span>
<span id="cb60-7"><a href="geodaten-beschaffen.html#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="geodaten-beschaffen.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb60-9"><a href="geodaten-beschaffen.html#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="geodaten-beschaffen.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ne_download</span>(<span class="at">type=</span><span class="st">&quot;land&quot;</span>, <span class="at">category =</span> <span class="st">&quot;physical&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-11"><a href="geodaten-beschaffen.html#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-12"><a href="geodaten-beschaffen.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">&#39;+proj=cea +lon_0=0 +x_0=0 +y_0=0 +lat_ts=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs&#39;</span>) <span class="ot">-&gt;</span> earthsf</span>
<span id="cb60-13"><a href="geodaten-beschaffen.html#cb60-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-14"><a href="geodaten-beschaffen.html#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="fu">st_read</span>(<span class="st">&quot;https://raw.githubusercontent.com/fraxen/tectonicplates/master/GeoJSON/PB2002_plates.json&quot;</span>) <span class="ot">-&gt;</span> plates</span>
<span id="cb60-15"><a href="geodaten-beschaffen.html#cb60-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-16"><a href="geodaten-beschaffen.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb60-17"><a href="geodaten-beschaffen.html#cb60-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> earthsf, <span class="at">fill =</span> <span class="st">&quot;gray&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb60-18"><a href="geodaten-beschaffen.html#cb60-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">data =</span> quakesf, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb60-19"><a href="geodaten-beschaffen.html#cb60-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> plates, <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">0.3</span>)</span></code></pre></div></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="karten-erstellen-hos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geodaten-verschneiden.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ktiu/ds21/edit/master/5_Geodaten_beschaffen.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ktiu/ds21/blob/master/5_Geodaten_beschaffen.Rmd",
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
